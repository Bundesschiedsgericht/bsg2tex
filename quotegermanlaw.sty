\ProvidesPackage{quotegermanlaw}[2016/10/21 v1.0 (Stefan Thöni)]
\RequirePackage{hyperref}
\RequirePackage{ifthen}
\RequirePackage{xparse}
\RequirePackage{scrbase}
\RequirePackage{pdftexcmds}
\RequirePackage{quotehelper}

% ======================================
% Gemeinsames Wording
% ======================================

\providecaptionname{ngerman}{\wordpar}{§}
\providecaptionname{ngerman}{\wordart}{Art.}
\providecaptionname{ngerman}{\wordabs}{Abs.}
\providecaptionname{ngerman}{\wordnum}{Nr.}
\providecaptionname{ngerman}{\wordchar}{Bst.}
\providecaptionname{ngerman}{\wordphr}{S.}
\providecaptionname{ngerman}{\wordhphr}{Halbs.}

\providecaptionname{ngerman}{\mjan}{Januar}
\providecaptionname{ngerman}{\mfeb}{Februar}
\providecaptionname{ngerman}{\mmar}{März}
\providecaptionname{ngerman}{\mapr}{April}
\providecaptionname{ngerman}{\mmai}{Mai}
\providecaptionname{ngerman}{\mjun}{Juni}
\providecaptionname{ngerman}{\mjul}{Juli}
\providecaptionname{ngerman}{\maug}{August}
\providecaptionname{ngerman}{\msep}{September}
\providecaptionname{ngerman}{\moct}{Oktober}
\providecaptionname{ngerman}{\mnov}{November}
\providecaptionname{ngerman}{\mdec}{Dezember}

% ======================================
% Zugriff Gesetze im Internet
% ======================================

\newcommand{\getlawurl}[2]{%
  \stringcases
    {#1}%
    {%
        {gg}{https://www.gesetze-im-internet.de/#1/art\_#2.html}
    }
    {https://www.gesetze-im-internet.de/#1/\_\_#2.html}%
}
\newcounter{ggcount}
\newcounter{partgcount}
\newcounter{vwgocount}

\newcommand{\getlawartpar}[1]{%
  \stringcases
    {#1}%
    {%
        {gg}{\wordart}
    }
    {\wordpar}%
}
\newcommand{\getlawname}[1]{%
  \stringcases
    {#1}%
    {%
        {gg}{\stepcounter{ggcount}\ifthenelse{\equal{\value{ggcount}}{1}}{Grundgesetz (GG)}{GG}}
        {partg}{\stepcounter{partgcount}\ifthenelse{\equal{\value{partgcount}}{1}}{Parteiengesetz (PartG)}{PartG}}
        {vwgo}{\stepcounter{vwgocount}\ifthenelse{\equal{\value{vwgocount}}{1}}{Verwaltungsgerichtsordnung (VwGO)}{VwGO}}
    }
    {}%
}

\DeclareDocumentCommand{\getlawlink}{ m O{} O{} O{} O{} O{} O{} O{} O{} }{%
\ifthenelse{\equal{#2}{}}{\href{https://www.gesetze-im-internet.de/#1/}{\getlawname{#1}}}{%
\href{\getlawurl{#1}{#2}}{\ifthenelse{\equal{#2}{}}{}{#9\getlawartpar{#1}~#2~}\ifthenelse{\equal{#3}{}}{}{\wordabs~#3~}\ifthenelse{\equal{#4}{}}{}{\wordnum~#4~}\ifthenelse{\equal{#5}{}}{}{\wordchar~#5~}\ifthenelse{\equal{#6}{}}{}{\wordphr~#6~}\ifthenelse{\equal{#7}{}}{}{\wordhphr~#7~}\ifthenelse{\equal{#8}{}}{}{#8~}\getlawname{#1}}}}

\DeclareDocumentCommand{\getsawlinkaf}{ m m O{} O{} O{} O{} O{} O{} O{} }{%
\href{#2}{\ifthenelse{\equal{#3}{}}{}{\getlawartpar{1}~#3~}\ifthenelse{\equal{#4}{}}{}{\wordabs~#4~}\ifthenelse{\equal{#5}{}}{}{\wordnum~#5~}\ifthenelse{\equal{#6}{}}{}{\wordchar~#6~}\ifthenelse{\equal{#7}{}}{}{\wordphr~#7~}\ifthenelse{\equal{#8}{}}{}{\wordhphr~#8~}\ifthenelse{\equal{#9}{}}{}{#9~}\getlawname{#1}}}

\DeclareDocumentCommand{\gg}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{gg}[#1][#2][#3][#4][#5][#6]}
\DeclareDocumentCommand{\ggf}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{gg}[#1][#2][#3][#4][#5][#6][f.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\ggff}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{gg}[#1][#2][#3][#4][#5][#6][ff.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\ggnf}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{gg}[#1][#2][#3][#4][#5][#6][n.F.]}
\DeclareDocumentCommand{\ggaf}{ O{} O{} O{} O{} O{} O{} O{} }{\getlawlinkaf{gg}{#1}[#2][#3][#4][#5][#6][#7][a.F.]}

\DeclareDocumentCommand{\partg}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{partg}[#1][#2][#3][#4][#5][#6]}
\DeclareDocumentCommand{\partgf}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{partg}[#1][#2][#3][#4][#5][#6][f.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\partgff}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{partg}[#1][#2][#3][#4][#5][#6][ff.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\partgnf}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{partg}[#1][#2][#3][#4][#5][#6][n.F.]}
\DeclareDocumentCommand{\partgaf}{ O{} O{} O{} O{} O{} O{} O{} }{\getlawlinkaf{partg}{#1}[#2][#3][#4][#5][#6][#7][a.F.]}

\DeclareDocumentCommand{\vwgo}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{vwgo}[#1][#2][#3][#4][#5][#6]}
\DeclareDocumentCommand{\vwgof}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{vwgo}[#1][#2][#3][#4][#5][#6][f.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\vwgoff}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{vwgo}[#1][#2][#3][#4][#5][#6][ff.][\ifthenelse{\equal{#2}{}}{§}{}]}
\DeclareDocumentCommand{\vwgonf}{ O{} O{} O{} O{} O{} O{} }{\getlawlink{vwgo}[#1][#2][#3][#4][#5][#6][n.F.]}
\DeclareDocumentCommand{\vwgoaf}{ O{} O{} O{} O{} O{} O{} O{} }{\getlawlinkaf{vwgo}{#1}[#2][#3][#4][#5][#6][#7][a.F.]}
